<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/multimedia_development/performance_debug" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">7.3.12 Multimedia Performance Debugging | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/performance_debug"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="7.3.12 Multimedia Performance Debugging | RDK DOC"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/performance_debug"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/performance_debug" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug" hreflang="x-default"><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.c60d9ce6.css">
<script src="/rdk_doc/en/assets/js/runtime~main.44a7d386.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.88361fd2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rdk_doc/en/"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent__dKv themedComponent--light_rzkv"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent__dKv themedComponent--dark_mMAk"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/RDK">RDK</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/multimedia_development/performance_debug" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/RDK">D-Robotics  RDK Suite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Quick_start">1.Quick Start</a><button aria-label="Expand sidebar category &#x27;1.Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Application">3 Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3 Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/linux_development">7.2. Linux Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/overview">7.3.1 System Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples">7.3.2 Sample Program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/system_control">7.3.3 System Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_input">7.3.4 Video Input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/isp_system">7.3.5 ISP Image System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_processing">7.3.6 Video Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/region_processing">7.3.7 Region Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_output">7.3.8 Video Output</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_encode">7.3.9 Video Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_decode">7.3.10 Video Decoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/debug_info">7.3.11 Query Multimedia Module Debug Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug">7.3.12 Multimedia Performance Debugging</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/FAQ">8. FAQs</a><button aria-label="Expand sidebar category &#x27;8. FAQs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rdk_doc/en/Advanced_development"><span itemprop="name">7. Advanced Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rdk_doc/en/03_multimedia_development"><span itemprop="name">7.3 Multimedia Development Guide</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">7.3.12 Multimedia Performance Debugging</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>7.3.12 Multimedia Performance Debugging</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#overview">​</a></h2>
<p>Camera is the main external source of image data, and the VIO software is a relatively opaque internal software that mainly provides relevant images and information to internal applications. The internal image processing IP information of the XJ3 chip is roughly as follows:</p>
<p><img decoding="async" loading="lazy" alt="image-20220329205706352" src="/rdk_doc/en/assets/images/multimedia_all-60f7da04ce545f66019df2af1aa106ed.png" width="1902" height="486" class="img_ev3q"></p>
<table><thead><tr><th>Input Method</th><th>IP</th><th>Output Method</th></tr></thead><tbody><tr><td>Online</td><td>MIPI</td><td>Online</td></tr><tr><td>Online/Offline</td><td>SIF</td><td>Online/Offline</td></tr><tr><td>Online</td><td>ISP</td><td>Online/Offline</td></tr><tr><td>Online</td><td>LDC</td><td>Online</td></tr><tr><td>Offline</td><td>GDC</td><td>Offline</td></tr><tr><td>Online/Offline</td><td>IPU</td><td>Online/Offline</td></tr><tr><td>Online/Offline</td><td>PYM</td><td>Offline</td></tr></tbody></table>
<p>Note: Online means data exchange through on-chip RAM, and Offline means data exchange through DDR.</p>
<p>This chapter mainly describes the adjustment of DDR priority and other relevant parameters for the commonly used scenarios of X3 chip&#x27;s image data processing path and other modules based on DDR bandwidth and latency.</p>
<p>When the instantaneous DDR bandwidth is insufficient, it will cause video frame loss. Between the frame rate and frame loss, a suitable configuration value can be selected to balance them based on the description in this chapter.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ddr-master-qos">DDR Master QoS<a class="hash-link" aria-label="Direct link to DDR Master QoS" title="Direct link to DDR Master QoS" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ddr-master-qos">​</a></h2>
<p>The modules of XJ3 access DDR through the AXI interface. XJ3 has 8 AXI interfaces, namely AXI_0 ~ AXI_7. The relationship between XJ3&#x27;s modules and the AXI interfaces is as follows:</p>
<table><thead><tr><th>Port Number</th><th>AXI_0</th><th>AXI_1</th><th>AXI_2</th><th>AXI_3</th><th>AXI_4</th><th>AXI_5</th><th>AXI_6</th><th>AXI_7</th></tr></thead><tbody><tr><td>Module Name</td><td>CPU/R5</td><td>NOC</td><td>CNN0</td><td>CNN1</td><td>VIO0</td><td>VPU/JPU</td><td>VIO1</td><td>PERI</td></tr></tbody></table>
<p>AXI_4 and AXI_6 are configurable, and the VIO sub-modules can be configured to AXI_4 or AXI_6 through registers. AXI_6 has a higher priority.</p>
<p>XJ3 VIO includes the following sub-modules: SIF_W, ISP0_M0, ISP0_M2, GDC0, DIS, SIF_R, IPU0, PYM, IAR.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="axi-qos-control">AXI QoS Control<a class="hash-link" aria-label="Direct link to AXI QoS Control" title="Direct link to AXI QoS Control" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#axi-qos-control">​</a></h2>
<p>The priority range of AXI QoS is 0 to 15, and the higher the value, the higher the priority. After the XJ3 system is started, the read and write QoS default configuration is 0x2021100.</p>
<p>The priority value of each port is set through the DDR_PORT_READ/WRITE_QOS_CTRL registers of the Perf Monitor, and then the Perf Monitor sets it to the DDR controller through hardware. The DDR controller does not need to be set by software.</p>
<p>The value of DDR QoS is set and queried in the DDR_Monitor driver through the attribute file of Sysfs.</p>
<p>It can be set through the &quot;all&quot; attribute file at once, where the lowest 4 bits correspond to P0_CPU, and the highest 4 bits correspond to P7_PERI.</p>
<p>It is also possible to set and query the priorities of individual ports separately, such as cpu, bifdma, bpu0, bpu1, vio0, vpu, vio1, peri, as follows:<strong>QoS sysfs interface</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Query read QoS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU port is not allowed to be configured in runtime.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can run chmod +w as root for debugging purpose.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04032221:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P0_CPU:     1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P1_BIFDMA:  2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P2_CNN0:    2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P3_CNN1:    2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P4_VIO0:    3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P5_VPU:     0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P6_VIO1:    4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P7_PERI:    0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU port is not allowed to be configured in runtime.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can run chmod +w as root for debugging purpose.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04032211:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P0_CPU:     1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P1_BIFDMA:  1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P2_CNN0:    2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P3_CNN1:    2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P4_VIO0:    3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P5_VPU:     0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P6_VIO1:    4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P7_PERI:    0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set bifdma read QoS to 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bifdma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set bpu0 read QoS to 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bpu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set bpu1 read QoS to 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bpu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set vio0 read QoS to 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set VPU read QoS to 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set VIO1 read QoS to 3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 3 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set PERI read QoS to 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/peri</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set BIFDMA write QoS to 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bifdma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set BPU0 write QoS to 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bpu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set BPU1 write QoS to 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bpu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set VIO0 write QoS to 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set VPU write QoS to 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set VIO1 write QoS to 3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 3 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set PERI write QoS to 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/peri</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vio-submodule-configuration">VIO Submodule Configuration<a class="hash-link" aria-label="Direct link to VIO Submodule Configuration" title="Direct link to VIO Submodule Configuration" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#vio-submodule-configuration">​</a></h2>
<p>The XJ3 VIO submodule includes SIF_W, ISP0_M0, ISP0_M2, GDC0, DIS, SIF_R, IPU0, PYM, and IAR, corresponding to SIF module write, ISP write, ISP Temper read/write, GDC0 read/write, DIS write, SIF module read, IPU0 module read/write, PYM module read/write, and IAR module read/write.</p>
<p>These submodules can be configured to VIO0 or VIO1 using the AXIBUS register. By default, the XJ3 system configures IAR and SIF_W to VIO1, while the other modules are configured to VIO0. The submodules correspond to bit31~bit16 of the AXIBUS register as shown in the following figure:</p>
<p><img decoding="async" loading="lazy" src="/rdk_doc/en/assets/images/vio_config-73700d30bb8532bd186afb44f23e604a.png" width="909" height="363" class="img_ev3q"></p>
<p>The grayed-out modules do not exist, and the corresponding bit is set to 1, indicating that the submodule is configured to VIO1. Otherwise, it is configured to VIO0. The &quot;all&quot; attribute can be used to configure or query all submodules at once, where the modules on VIO1 are returned, and the other modules are on VIO0. It is also possible to configure or query individual submodules using their respective attributes.</p>
<p>AXIBUS sys interface</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set, value 1 configures to vio1, value 0 configures to vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0xc0020000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/t21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/iar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/pym</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/ipu0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Read, print all modules configured on vio1, other modules on vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all axibus: 0xc0020000: sifw: vio1 pym: vio1 iar: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Module Read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifr axibus: 0xc0020000: sifr: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifw axibus: 0xc0020000: sif: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m0 axibus: 0xc0020000: isp_0_m0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m1 axibus: 0xc0020000: isp_0_m1: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m2 axibus: 0xc0020000: isp_0_m2: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc0 axibus: 0xc0020000: gdc_0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc1 axibus: 0xc0020000: gdc_1: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/t21 axibus: 0xc0020000: t21: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/ipu0 axibus: 0xc0020000: ipu0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/pym axibus: 0xc0020000: pym: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/iar axibus: 0xc0020000: iar: vio1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sif-hblank-setting">SIF HBlank Setting<a class="hash-link" aria-label="Direct link to SIF HBlank Setting" title="Direct link to SIF HBlank Setting" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#sif-hblank-setting">​</a></h2>
<p>SIF reads the image line by line and sends it to ISP for processing. By increasing the horizontal blanking (HBlank), it is possible to delay the output of the next line, giving more time for ISP or other modules to process.</p>
<p>The default HBlank value for XJ3 SIF is 10.</p>
<p>HBlank affects the frame rate, and the relationship with the frame rate is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">time = ((width + hblank * 32) * height) / (clock * 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># clock is the ISP frequency, default to 544M.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Taking 4K as an example, the calculation is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">time = ((width + hblank * 32) * height) / (clock * 1000)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Image Width</th><th>HBlank (register)</th><th>Image Height</th><th>Clock (MHz)</th><th>Time (ms)</th><th>FPS</th></tr></thead><tbody><tr><td>3840</td><td>10</td><td>2160</td><td>544</td><td>16.5176</td><td>60.54</td></tr><tr><td>3840</td><td>40</td><td>2160</td><td>544</td><td>20.3294</td><td>49.19</td></tr><tr><td>3840</td><td>70</td><td>2160</td><td>544</td><td>24.1412</td><td>41.42</td></tr><tr><td>3840</td><td>120</td><td>2160</td><td>544</td><td>30.4941</td><td>32.79</td></tr></tbody></table>
<p>Sysfs interface is provided to set and query HBlank, as follows:</p>
<p>Set HBlank: echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</p>
<p>Query HBlank: cat /sys/devices/platform/soc/a4001000.sif/hblank</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-configuration">IPU Configuration<a class="hash-link" aria-label="Direct link to IPU Configuration" title="Direct link to IPU Configuration" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-line_delay--wr_ddr_fifo_thred">IPU Line_delay  wr_ddr_fifo_thred<a class="hash-link" aria-label="Direct link to IPU Line_delay  wr_ddr_fifo_thred" title="Direct link to IPU Line_delay  wr_ddr_fifo_thred" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-line_delay--wr_ddr_fifo_thred">​</a></h3>
<p>IPU has a line_delay setting, with a unit of 1 line. The larger the value, the larger the bus delay that the IPU can tolerate, which is helpful for reducing frame drop in offline mode.</p>
<p>At the same time, a smaller value of wr_ddr_fifo_thred can reduce frame drop.</p>
<p>When multiple channels of IPU output to DDR at the same time, it is recommended to set line_delay to 255 and wr_ddr_fifo_thred to 0.</p>
<p>The default value for line_delay is 16, the default value for wr_fifo_thred0 is 0x30323020, and the default value for wr_fifo_thred1 is 0x00003220.</p>
<p>The sysfs interface configuration is as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x0 &gt; /sys/devices/platform/soc/a4040000.ipu/wr_fifo_thred0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x0 &gt; /sys/devices/platform/soc/a4040000.ipu/wr_fifo_thred1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 255 &gt; /sys/devices/platform/soc/a4040000.ipu/line_delay</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-clock">IPU Clock<a class="hash-link" aria-label="Direct link to IPU Clock" title="Direct link to IPU Clock" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-clock">​</a></h3>
<p>The clock of the IPU is provided by the SIF mclk. The frequency of the IPU can be changed by configuring the SIF clock through sysfs. The default frequency of the IPU is 544MHz, and the configurable frequencies are 544M, 408M, 326M, and 272M.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 544000000 &gt; /sys/module/hobot_dev_ips/parameters/sif_mclk_freq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-safety-size">IPU Safety Size<a class="hash-link" aria-label="Direct link to IPU Safety Size" title="Direct link to IPU Safety Size" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-safety-size">​</a></h3>
<p>The FIFO depths of multiple channels of the IPU are different. The safety sizes are as follows:</p>
<table><thead><tr><th>IPU Scaler #</th><th>Full Depth Limit (Bytes)</th><th>Recommended Resolution (Pixels)</th></tr></thead><tbody><tr><td>Scaler 5(IPU US)</td><td>4096</td><td>8M</td></tr><tr><td>Scaler 2(DS2)</td><td>4096</td><td>8M</td></tr><tr><td>Scaler 1(DS1)</td><td>2048</td><td>2M</td></tr><tr><td>Scaler 3(DS3)</td><td>2048</td><td>2M</td></tr><tr><td>Scaler 4(DS4)</td><td>1280</td><td>1M</td></tr><tr><td>Scaler 0(DS0)</td><td>1280</td><td>1M</td></tr></tbody></table>
<p>Scaler0<del>4 correspond to ds0</del>5 of the IPU, and Scaler5 corresponds to the IPU&#x27;s us. If the output size exceeds the safety size, it may result in a higher probability of hardware frame drop and a risk of continuous errors in the output data of several tens of bytes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="typical-scenario-settings">Typical Scenario Settings<a class="hash-link" aria-label="Direct link to Typical Scenario Settings" title="Direct link to Typical Scenario Settings" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#typical-scenario-settings">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-4k-input-multiple-channel-encoding">Single 4K Input, Multiple Channel Encoding<a class="hash-link" aria-label="Direct link to Single 4K Input, Multiple Channel Encoding" title="Direct link to Single 4K Input, Multiple Channel Encoding" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#single-4k-input-multiple-channel-encoding">​</a></h3>
<p>The typical scenario is as follows: 4k DOL2 input, SIF - offline - ISP - GDC - IPU, the IPU outputs 1 channel of 4k, 2 channels of 1080P, and 2 channels of D1. A total of 5 channels are sent to encoding. At the same time, IPU ds2 is online to PYM, and PYM outputs 720P.</p>
<p>SIF hblank and QoS are recommended to be configured as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x10100000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x03120000 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x03120000 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-1080p-input">Dual 1080P input<a class="hash-link" aria-label="Direct link to Dual 1080P input" title="Direct link to Dual 1080P input" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#dual-1080p-input">​</a></h3>
<p>Typical scenario: dual 1080P input, SIF-offline-ISP-online-IPU-online-PYM-&gt;DDR (base layer).</p>
<p>One route PYM output for encoding (1080P) + display (1080P), and the other route for BPU.</p>
<p>SIF hblank and QoS suggestions are configured as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x40000000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-1080p-input">Single 1080P input<a class="hash-link" aria-label="Direct link to Single 1080P input" title="Direct link to Single 1080P input" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#single-1080p-input">​</a></h3>
<p>Typical scenario: single 1080P input, SIF-offline-ISP-online-IPU, IPU 6-channel ROI enabled.</p>
<p>SIF hblank suggestions are configured as follows:</p>
<p>echo 64 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-process-sharing-configuration">Multi-process sharing configuration<a class="hash-link" aria-label="Direct link to Multi-process sharing configuration" title="Direct link to Multi-process sharing configuration" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#multi-process-sharing-configuration">​</a></h2>
<p>Multi-process sharing currently supports a maximum of 8 processes sharing camera data, and supports output data from IPU and PYM. Multi-process sharing requires the following conditions to be met:</p>
<ul>
<li>Must be in a fully online scenario: SIF-online-ISP-online-IPU-online-PYM;</li>
<li>The number of BUFs configured for the output channels needs to be greater than or equal to 4, otherwise there is a risk of lower frame rate;</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vio-delay-viewing">VIO delay viewing<a class="hash-link" aria-label="Direct link to VIO delay viewing" title="Direct link to VIO delay viewing" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#vio-delay-viewing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1">Method 1<a class="hash-link" aria-label="Direct link to Method 1" title="Direct link to Method 1" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#method-1">​</a></h3>
<ol>
<li>
<p>Run the VIO application normally, <code>ls /tmp</code>, and you can see vio_group_info_pidxxx under the /tmp directory, where xxx is the process number.</p>
</li>
<li>
<p>Enter the command <code>echo &quot;frame_state&quot; &gt; /tmp/vio_group_info_pidxxx</code> in the command line of the board, where xxx corresponds to the process number in step 1.</p>
</li>
<li>
<p>After step 2, the dumped information vio_frame_state_pipe[pipeline]_[time].log will be generated in the /userdata/log/usr/ directory.</p>
</li>
<li>
<p>Use Notepad++, search for Frmid xxxxx, where xxxxx is the frame number. The processing time of each module can be obtained by subtracting the xxx time before PYM out free from the xxx time before ISP out dq.</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="image-20220929113655983" src="/rdk_doc/en/assets/images/vio_delay_view-da2d8568b20596f8718f8b905984ce1a.png" width="1367" height="688" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2">Method 2<a class="hash-link" aria-label="Direct link to Method 2" title="Direct link to Method 2" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#method-2">​</a></h3>
<p>By using the HB_VPS_GetChnFrame(int VpsGrp, int VpsChn, void *videoFrame, int ms) interface, the pyramid videoFrame can be obtained. The structure pointer is forcibly converted to a pym_buffer_t pointer, and then the pym_img_info can be found through pym_buffer_t. The pym_img_info contains a struct timeval tv, which is the system time filled in by sif&#x27;s frame start. By using the gettimeofday interface to get the current system time minus the tv time, the delay in obtaining data from sif&#x27;s frame start to pym can be obtained.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/D-Robotics/rdk_doc/blob/main/docs/07_Advanced_development/03_multimedia_development/performance_debug.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/Advanced_development/multimedia_development/debug_info"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">7.3.11 Query Multimedia Module Debug Information</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/04_toolchain_development"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">7.4 算法工具链开发指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#overview">Overview</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ddr-master-qos">DDR Master QoS</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#axi-qos-control">AXI QoS Control</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#vio-submodule-configuration">VIO Submodule Configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#sif-hblank-setting">SIF HBlank Setting</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-configuration">IPU Configuration</a><ul><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-line_delay--wr_ddr_fifo_thred">IPU Line_delay  wr_ddr_fifo_thred</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-clock">IPU Clock</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#ipu-safety-size">IPU Safety Size</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#typical-scenario-settings">Typical Scenario Settings</a><ul><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#single-4k-input-multiple-channel-encoding">Single 4K Input, Multiple Channel Encoding</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#dual-1080p-input">Dual 1080P input</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#single-1080p-input">Single 1080P input</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#multi-process-sharing-configuration">Multi-process sharing configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#vio-delay-viewing">VIO delay viewing</a><ul><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#method-1">Method 1</a></li><li><a class="table-of-contents__link toc-highlight" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug#method-2">Method 2</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/437998606" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>